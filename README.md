# Info OSD - Android è¢å¹•è³‡è¨Šé¡¯ç¤ºå·¥å…·

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Android](https://img.shields.io/badge/Platform-Android-green.svg)](https://developer.android.com)
[![API](https://img.shields.io/badge/API-24%2B-brightgreen.svg?style=flat)](https://android-arsenal.com/api?level=24)

Info OSD æ˜¯ä¸€å€‹è¼•é‡ç´šçš„ Android æ‡‰ç”¨ç¨‹å¼ï¼Œå¯ä»¥åœ¨è¢å¹•ä¸Šä»¥æ‡¸æµ®çª—å½¢å¼é¡¯ç¤ºé›»æ± é›»é‡å’Œç•¶å‰æ™‚é–“ï¼Œä¸¦æä¾›æˆªåœ–åŠŸèƒ½ã€‚

## ğŸ“± åŠŸèƒ½ç‰¹è‰²

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ”‹ é›»æ± é›»é‡é¡¯ç¤º** - å¯¦æ™‚é¡¯ç¤ºé›»æ± é›»é‡ç™¾åˆ†æ¯”
- **â° æ™‚é–“é¡¯ç¤º** - é¡¯ç¤ºç•¶å‰æ™‚é–“ï¼ˆ24å°æ™‚åˆ¶ï¼‰
- **ğŸ“¸ æˆªåœ–åŠŸèƒ½** - é»æ“Š OSD è§¸ç™¼æˆªåœ–ï¼Œè‡ªå‹•ä¿å­˜åˆ°ç³»çµ±ç›¸ç°¿
- **âš™ï¸ è‡ªå®šç¾©è¨­ç½®** - å¯èª¿æ•´æ–‡å­—å¤§å°ã€é¡è‰²å’Œé¡¯ç¤ºä½ç½®
- **ğŸ” æ¬Šé™ç®¡ç†** - æ™ºèƒ½çš„å‹•æ…‹æ¬Šé™è«‹æ±‚å’Œç®¡ç†

### ç”¨æˆ¶é«”é©—
- **ğŸŒ å®Œæ•´ä¸­æ–‡åŒ–** - æ‰€æœ‰ç•Œé¢å…ƒç´ éƒ½æ˜¯ç¹é«”ä¸­æ–‡
- **ğŸ¨ å°ˆæ¥­åœ–ç¤º** - ç²¾ç¾çš„æ‡‰ç”¨åœ–ç¤ºè¨­è¨ˆ
- **ğŸ“± ç³»çµ±æ•´åˆ** - å®Œç¾æ•´åˆç³»çµ±ç›¸ç°¿ã€ç€è¦½å™¨å’Œéƒµä»¶
- **ğŸš€ ä½è³‡æºæ¶ˆè€—** - é«˜æ•ˆçš„æœå‹™å¯¦ç¾ï¼Œä¸å½±éŸ¿ç³»çµ±æ€§èƒ½
- **ğŸ’¯ å®Œå…¨å…è²»** - ç„¡å»£å‘Šã€ç„¡å…§è³¼ã€ç„¡ä½¿ç”¨é™åˆ¶

## ğŸ› ï¸ æŠ€è¡“è¦æ ¼

### ç³»çµ±éœ€æ±‚
- **Android ç‰ˆæœ¬**: 7.0 (API 24) æˆ–æ›´é«˜
- **ç›®æ¨™ SDK**: Android 14 (API 34)
- **æ¶æ§‹æ”¯æ´**: ARM64, ARM, x86, x86_64
- **æ¬Šé™éœ€æ±‚**: æ‡¸æµ®çª—æ¬Šé™ã€åª’é«”æŠ•å½±æ¬Šé™

### æŠ€è¡“ç‰¹æ€§
- **MediaProjection API** - ç”¨æ–¼æˆªåœ–åŠŸèƒ½
- **MediaStore API** - ç”¨æ–¼åœ–ç‰‡ä¿å­˜åˆ°ç³»çµ±ç›¸ç°¿
- **å‰å°æœå‹™** - ç¢ºä¿ OSD ç©©å®šé‹è¡Œ
- **å‹•æ…‹æ¬Šé™** - æ™ºèƒ½çš„æ¬Šé™è«‹æ±‚ç®¡ç†
- **å¤šå¯†åº¦æ”¯æ´** - é©é…å„ç¨®è¢å¹•è§£æåº¦

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹

```
InfoOSD/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/com/infoosd/
â”‚   â”‚   â”‚   â”œâ”€â”€ MainActivity.java              # ä¸»æ´»å‹•
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsActivity.java          # è¨­å®šæ´»å‹•
â”‚   â”‚   â”‚   â”œâ”€â”€ OverlayService.java            # OSD è¦†è“‹å±¤æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ MinimalScreenshotService.java  # æˆªåœ–æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ MinimalScreenshotActivity.java # æˆªåœ–æ¬Šé™è«‹æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsManager.java           # è¨­å®šç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionManager.java         # æ¬Šé™ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ BatteryReceiver.java           # é›»æ± ç‹€æ…‹æ¥æ”¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ BootReceiver.java              # é–‹æ©Ÿå•Ÿå‹•æ¥æ”¶å™¨
â”‚   â”‚   â”œâ”€â”€ res/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/                        # ç•Œé¢å¸ƒå±€æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ values/                        # å­—ç¬¦ä¸²å’Œæ¨£å¼è³‡æº
â”‚   â”‚   â”‚   â”œâ”€â”€ values-zh/                     # ç¹é«”ä¸­æ–‡è³‡æº
â”‚   â”‚   â”‚   â”œâ”€â”€ drawable/                      # åœ–å½¢è³‡æº
â”‚   â”‚   â”‚   â””â”€â”€ mipmap-*/                      # æ‡‰ç”¨åœ–ç¤ºï¼ˆå¤šå¯†åº¦ï¼‰
â”‚   â”‚   â””â”€â”€ AndroidManifest.xml               # æ‡‰ç”¨æ¸…å–®æ–‡ä»¶
â”‚   â”œâ”€â”€ build.gradle                          # æ‡‰ç”¨æ§‹å»ºé…ç½®
â”‚   â””â”€â”€ proguard-rules.pro                    # ä»£ç¢¼æ··æ·†è¦å‰‡
â”œâ”€â”€ gradle/                                   # Gradle åŒ…è£å™¨
â”œâ”€â”€ build.gradle                              # å°ˆæ¡ˆæ§‹å»ºé…ç½®
â”œâ”€â”€ settings.gradle                           # å°ˆæ¡ˆè¨­å®š
â”œâ”€â”€ gradle.properties                         # Gradle å±¬æ€§
â”œâ”€â”€ local.properties                          # æœ¬åœ°é…ç½®ï¼ˆéœ€è‡ªè¡Œå‰µå»ºï¼‰
â”œâ”€â”€ README.md                                 # å°ˆæ¡ˆèªªæ˜æ–‡æª”
â”œâ”€â”€ LICENSE                                   # é–‹æºæˆæ¬Š
â””â”€â”€ DEVELOPMENT.md                            # é–‹ç™¼æŒ‡å—
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒæº–å‚™
1. **Android Studio** - å»ºè­°ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
2. **Android SDK** - API 24 æˆ–æ›´é«˜
3. **Java/Kotlin** - æ”¯æ´ Java 8 æˆ–æ›´é«˜

### æ§‹å»ºæ­¥é©Ÿ
1. **å…‹éš†å°ˆæ¡ˆ**
   ```bash
   git clone https://github.com/yourusername/InfoOSD.git
   cd InfoOSD
   ```

2. **é…ç½® Android SDK**
   å‰µå»º `local.properties` æ–‡ä»¶ï¼š
   ```properties
   sdk.dir=/path/to/your/android-sdk
   ```

3. **æ§‹å»º APK**
   ```bash
   ./gradlew assembleDebug
   ```

4. **å®‰è£åˆ°è¨­å‚™**
   ```bash
   ./gradlew installDebug
   ```

### é–‹ç™¼ç’°å¢ƒè¨­å®š
è©³ç´°çš„é–‹ç™¼ç’°å¢ƒè¨­å®šè«‹åƒè€ƒ [DEVELOPMENT.md](DEVELOPMENT.md)

## ğŸ“– ä½¿ç”¨èªªæ˜

### é¦–æ¬¡ä½¿ç”¨
1. **å®‰è£æ‡‰ç”¨** - å®‰è£ APK æ–‡ä»¶åˆ° Android è¨­å‚™
2. **æˆäºˆæ¬Šé™** - å…è¨±æ‡¸æµ®çª—é¡¯ç¤ºæ¬Šé™
3. **å•Ÿå‹•æœå‹™** - é»æ“Šã€Œå•Ÿå‹•æœå‹™ã€æŒ‰éˆ•
4. **è‡ªå®šç¾©è¨­ç½®** - æ ¹æ“šéœ€è¦èª¿æ•´é¡¯ç¤ºè¨­ç½®

### æˆªåœ–åŠŸèƒ½
1. **é»æ“Š OSD** - é»æ“Šè¢å¹•ä¸Šçš„ OSD é¡¯ç¤º
2. **æˆäºˆæ¬Šé™** - é¦–æ¬¡ä½¿ç”¨æ™‚æˆäºˆåª’é«”æŠ•å½±æ¬Šé™
3. **æŸ¥çœ‹æˆªåœ–** - æˆªåœ–è‡ªå‹•ä¿å­˜åˆ°ç³»çµ±ç›¸ç°¿çš„ Screenshots æ–‡ä»¶å¤¾

### è¨­å®šé¸é …
- **æ–‡å­—å¤§å°** - èª¿æ•´ OSD æ–‡å­—çš„å¤§å°
- **æ–‡å­—é¡è‰²** - é¸æ“‡ OSD æ–‡å­—çš„é¡è‰²
- **é¡¯ç¤ºä½ç½®** - è¨­å®š OSD åœ¨è¢å¹•ä¸Šçš„ä½ç½®

## ğŸ”§ é–‹ç™¼æŒ‡å—

### æ ¸å¿ƒçµ„ä»¶

#### OverlayService
è² è²¬ OSD æ‡¸æµ®çª—çš„é¡¯ç¤ºå’Œç®¡ç†ï¼š
```java
public class OverlayService extends Service {
    // OSD è¦–åœ–ç®¡ç†
    // é›»æ± ç‹€æ…‹ç›£è½
    // æ™‚é–“æ›´æ–°é‚è¼¯
    // é»æ“Šäº‹ä»¶è™•ç†
}
```

#### MinimalScreenshotService
è™•ç†æˆªåœ–åŠŸèƒ½çš„æ ¸å¿ƒæœå‹™ï¼š
```java
public class MinimalScreenshotService extends Service {
    // MediaProjection ç®¡ç†
    // VirtualDisplay å‰µå»º
    // åœ–åƒæ•ç²å’Œä¿å­˜
    // ç³»çµ±ç›¸ç°¿æ•´åˆ
}
```

#### SettingsManager
ç®¡ç†æ‡‰ç”¨è¨­å®šçš„å·¥å…·é¡ï¼š
```java
public class SettingsManager {
    // SharedPreferences æ“ä½œ
    // è¨­å®šå€¼çš„è®€å–å’Œä¿å­˜
    // é è¨­å€¼ç®¡ç†
}
```

### æ¬Šé™è™•ç†
æ‡‰ç”¨éœ€è¦ä»¥ä¸‹é—œéµæ¬Šé™ï¼š
- `SYSTEM_ALERT_WINDOW` - æ‡¸æµ®çª—é¡¯ç¤º
- `FOREGROUND_SERVICE_MEDIA_PROJECTION` - æˆªåœ–æœå‹™
- `READ_MEDIA_IMAGES` - è®€å–åª’é«”æ–‡ä»¶

### æˆªåœ–æµç¨‹
1. **æ¬Šé™è«‹æ±‚** - é€šé MediaProjectionManager è«‹æ±‚æ¬Šé™
2. **æœå‹™å•Ÿå‹•** - å•Ÿå‹•å‰å°æˆªåœ–æœå‹™
3. **è™›æ“¬é¡¯ç¤º** - å‰µå»º VirtualDisplay æ•ç²è¢å¹•
4. **åœ–åƒè™•ç†** - ä½¿ç”¨ ImageReader ç²å–åœ–åƒæ•¸æ“š
5. **æ–‡ä»¶ä¿å­˜** - é€šé MediaStore API ä¿å­˜åˆ°ç›¸ç°¿

## ğŸ¨ è‡ªå®šç¾©é–‹ç™¼

### æ·»åŠ æ–°åŠŸèƒ½
1. **å‰µå»ºæ–°çš„ Service** - ç¹¼æ‰¿ Service é¡
2. **è¨»å†Šåˆ° Manifest** - åœ¨ AndroidManifest.xml ä¸­è¨»å†Š
3. **å¯¦ç¾æ¥­å‹™é‚è¼¯** - ç·¨å¯«å…·é«”åŠŸèƒ½ä»£ç¢¼
4. **æ›´æ–° UI** - åœ¨è¨­å®šé é¢æ·»åŠ ç›¸é—œé¸é …

### ä¿®æ”¹ OSD æ¨£å¼
ç·¨è¼¯ `OverlayService.java` ä¸­çš„è¦–åœ–å‰µå»ºé‚è¼¯ï¼š
```java
private void createOverlayView() {
    // è‡ªå®šç¾© OSD å¤–è§€
    // ä¿®æ”¹å¸ƒå±€ã€é¡è‰²ã€å­—é«”ç­‰
}
```

### æ“´å±•è¨­å®šé¸é …
åœ¨ `SettingsActivity.java` å’Œ `SettingsManager.java` ä¸­æ·»åŠ æ–°çš„è¨­å®šé …ç›®ã€‚

## ğŸ§ª æ¸¬è©¦

### å–®å…ƒæ¸¬è©¦
```bash
./gradlew test
```

### è¨­å‚™æ¸¬è©¦
```bash
./gradlew connectedAndroidTest
```

### æ‰‹å‹•æ¸¬è©¦æ¸…å–®
- [ ] OSD é¡¯ç¤ºæ­£å¸¸
- [ ] é›»æ± é›»é‡æ›´æ–°
- [ ] æ™‚é–“é¡¯ç¤ºæº–ç¢º
- [ ] æˆªåœ–åŠŸèƒ½æ­£å¸¸
- [ ] è¨­å®šä¿å­˜ç”Ÿæ•ˆ
- [ ] æ¬Šé™è«‹æ±‚æ­£å¸¸
- [ ] é–‹æ©Ÿè‡ªå•Ÿå‹•

## ğŸ“¦ ç™¼å¸ƒ

### æ§‹å»ºç™¼å¸ƒç‰ˆæœ¬
```bash
./gradlew assembleRelease
```

### ç°½åé…ç½®
åœ¨ `app/build.gradle` ä¸­é…ç½®ç°½åï¼š
```gradle
android {
    signingConfigs {
        release {
            storeFile file('your-keystore.jks')
            storePassword 'your-store-password'
            keyAlias 'your-key-alias'
            keyPassword 'your-key-password'
        }
    }
}
```

## ğŸ¤ è²¢ç»æŒ‡å—

### å¦‚ä½•è²¢ç»
1. **Fork å°ˆæ¡ˆ** - å‰µå»ºå°ˆæ¡ˆçš„åˆ†æ”¯
2. **å‰µå»ºåŠŸèƒ½åˆ†æ”¯** - `git checkout -b feature/new-feature`
3. **æäº¤æ›´æ”¹** - `git commit -am 'Add new feature'`
4. **æ¨é€åˆ†æ”¯** - `git push origin feature/new-feature`
5. **å‰µå»º Pull Request** - æäº¤åˆä½µè«‹æ±‚

### ä»£ç¢¼è¦ç¯„
- ä½¿ç”¨ Java 8+ èªæ³•
- éµå¾ª Android é–‹ç™¼æœ€ä½³å¯¦è¸
- æ·»åŠ é©ç•¶çš„è¨»é‡‹å’Œæ–‡æª”
- ç¢ºä¿ä»£ç¢¼é€šéæ‰€æœ‰æ¸¬è©¦

### å•é¡Œå›å ±
è«‹ä½¿ç”¨ GitHub Issues å›å ±å•é¡Œï¼ŒåŒ…å«ï¼š
- è¨­å‚™å‹è™Ÿå’Œ Android ç‰ˆæœ¬
- è©³ç´°çš„å•é¡Œæè¿°
- é‡ç¾æ­¥é©Ÿ
- ç›¸é—œçš„æ—¥èªŒä¿¡æ¯

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ‘¨â€ğŸ’» ä½œè€…

**å»–é˜¿è¼**
- ç¶²ç«™: [https://ahui3c.com](https://ahui3c.com)
- ä¿¡ç®±: [chehui@gmail.com](mailto:chehui@gmail.com)
- ç¤¾ç¾¤: FB ç²‰çµ²åœ˜èˆ‡ Youtube æœå°‹ã€Œ3C é”äººå»–é˜¿è¼ã€

## ğŸ™ è‡´è¬

æ„Ÿè¬æ‰€æœ‰ç‚ºé€™å€‹å°ˆæ¡ˆåšå‡ºè²¢ç»çš„é–‹ç™¼è€…å’Œä½¿ç”¨è€…ã€‚

## ğŸ“š ç›¸é—œè³‡æº

### Android é–‹ç™¼æ–‡æª”
- [Android Developer Guide](https://developer.android.com/guide)
- [MediaProjection API](https://developer.android.com/reference/android/media/projection/MediaProjection)
- [Foreground Services](https://developer.android.com/guide/components/foreground-services)

### ç¬¬ä¸‰æ–¹åº«
æœ¬å°ˆæ¡ˆä¸»è¦ä½¿ç”¨ Android åŸç”Ÿ APIï¼Œæœªä¾è³´ç¬¬ä¸‰æ–¹åº«ï¼Œç¢ºä¿æ‡‰ç”¨çš„è¼•é‡å’Œç©©å®šã€‚

## ğŸ”„ ç‰ˆæœ¬æ­·å²

### v0.1 (2025-09-07)
- âœ¨ åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
- âœ¨ OSD é›»æ± å’Œæ™‚é–“é¡¯ç¤ºåŠŸèƒ½
- âœ¨ æˆªåœ–åŠŸèƒ½å¯¦ç¾
- âœ¨ è‡ªå®šç¾©è¨­ç½®æ”¯æ´
- âœ¨ å®Œæ•´ä¸­æ–‡åŒ–ç•Œé¢
- âœ¨ å°ˆæ¥­åœ–ç¤ºè¨­è¨ˆ
- âœ¨ ç³»çµ±ç›¸ç°¿æ•´åˆ

## ğŸš§ æœªä¾†è¨ˆåŠƒ

### çŸ­æœŸç›®æ¨™
- [ ] æ·»åŠ æ›´å¤š OSD é¡¯ç¤ºé¸é …ï¼ˆCPUã€è¨˜æ†¶é«”ä½¿ç”¨ç‡ï¼‰
- [ ] æ”¯æ´æ›´å¤šæˆªåœ–æ ¼å¼å’Œå“è³ªè¨­å®š
- [ ] æ·»åŠ ä¸»é¡Œå’Œå¤–è§€è‡ªå®šç¾©
- [ ] å„ªåŒ–é›»æ± æ¶ˆè€—

### é•·æœŸç›®æ¨™
- [ ] æ”¯æ´ Android 15+ æ–°ç‰¹æ€§
- [ ] æ·»åŠ é›²ç«¯åŒæ­¥åŠŸèƒ½
- [ ] é–‹ç™¼ Wear OS ç‰ˆæœ¬
- [ ] åœ‹éš›åŒ–æ”¯æ´ï¼ˆå¤šèªè¨€ï¼‰

## ğŸ“ æ”¯æ´

å¦‚æœæ‚¨åœ¨ä½¿ç”¨éç¨‹ä¸­é‡åˆ°å•é¡Œæˆ–æœ‰å»ºè­°ï¼Œæ­¡è¿ï¼š
- å‰µå»º GitHub Issue
- ç™¼é€éƒµä»¶åˆ° chehui@gmail.com
- åœ¨ç¤¾ç¾¤åª’é«”ä¸Šè¯ç¹«æˆ‘å€‘

---

**è®“æ‚¨çš„ Android è¨­å‚™æ›´åŠ æ™ºèƒ½ä¾¿æ·ï¼** ğŸš€

